defaultEntryPoints = ["http", "https"]
[entryPoints]
  [entryPoints.http]
  address = ":80"
    [entryPoints.http.redirect]
    entryPoint = "https"
  [entryPoints.https]
  address = ":443"
    [entryPoints.https.tls]
      [[entryPoints.https.tls.certificates]]
      certFile = "/etc/traefik/certs/{{ ansible_facts['nodename'] }}.home.pem"
      keyFile = "/etc/traefik/certs/{{ ansible_facts['nodename'] }}.home-key.pem"
      [[entryPoints.https.tls.certificates]]
      certFile = "/etc/traefik/certs/_wildcard.{{ ansible_facts['nodename'] }}.home.pem"
      keyFile = "/etc/traefik/certs/_wildcard.{{ ansible_facts['nodename'] }}.home-key.pem"
      # Kind wip
      [[entryPoints.https.tls.certificates]]
      certFile = "/etc/traefik/certs/_wildcard.kind.{{ ansible_facts['nodename'] }}.home.pem"
      keyFile = "/etc/traefik/certs/_wildcard.kind.{{ ansible_facts['nodename'] }}.home-key.pem"
[api]
[ping]
[docker]
domain = "{{ ansible_facts['nodename'] }}.home"
exposedByDefault = false
insecureSkipVerify = true

[file]
  watch = true

[backends]
 [backends.kind]
   [backends.kind.servers]
     [backends.kind.servers.server0]
     url = "http://172.42.0.64"
     weight = 1

[frontends]
  [frontends.kind]
  entryPoints = ["http", "https"]
  backend = "kind"
  passHostHeader = true
  [frontends.kind.routes]
    [frontends.kind.routes.route0]
      rule = "HostRegexp:{subdomain:[a-z]+}.kind.lucio.home,kind.lucio.home"
